<!DOCTYPE HTML>
<html>

<head>
    <title>Order Create</title>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

</head>

<body>
    <div class="container">

        <div class="page-header d-flex justify-content-center my-3">
            <h1 class="text-light mt-2">Create Order</h1>
        </div>

        <!-- html form here where the product information will be entered -->
        <form action="" method="POST">
            <table class='table table-dark table-hover table-responsive table-bordered' id="row_del">

                <tr>
                    <td class="text-center text-light">#</td>
                    <td class="text-center text-light">Product</td>
                    <td class="text-center text-light">Quantity</td>
                    <td class="text-center text-light">Action</td>
                </tr>
                <tr class="pRow">
                    <td class="text-center">1</td>
                    <td class="d-flex">
                        <select class="form-select form-select-lg mb-3 col" name="product_id[]" aria-label=".form-select-lg example">
                            <option>Please select product</option>
                        </select>
                    </td>
                    <td><input type="number" class="form-select form-select-lg mb-3" name="quantity[]" aria-label=".form-select-lg example" /></td>
                    <td><input href='#' onclick='deleteRow(this)' class='btn d-flex justify-content-center btn-danger mt-1' value="Delete" /></td>
                </tr>
                <tr>
                    <td>

                    </td>
                    <td colspan="4">
                        <input type="button" value="Add More Product" class="btn btn-success add_one" />
                    </td>
                </tr>
            </table>
        </form>

        <script>
            document.addEventListener('click', function(event) {
                if (event.target.matches('.add_one')) {
                    var rows = document.getElementsByClassName('pRow');
                    // Get the last row in the table
                    var lastRow = rows[rows.length - 1];
                    // Clone the last row
                    var clone = lastRow.cloneNode(true);
                    // Insert the clone after the last row
                    lastRow.insertAdjacentElement('afterend', clone);

                    // Loop through the rows
                    for (var i = 0; i < rows.length; i++) {
                        // Set the inner HTML of the first cell to the current loop iteration number
                        rows[i].cells[0].innerHTML = i + 1;
                    }
                }
            }, false);

            function deleteRow(r) {
                var total = document.querySelectorAll('.pRow').length;
                if (total > 1) {
                    var i = r.parentNode.parentNode.rowIndex;
                    document.getElementById("row_del").deleteRow(i);

                    var rows = document.getElementsByClassName('pRow');
                    for (var i = 0; i < rows.length; i++) {
                        // Set the inner HTML of the first cell to the current loop iteration number
                        rows[i].cells[0].innerHTML = i + 1;
                    }
                } else {
                    alert("You need order at least one item.");
                }
            }
        </script>

    </div>
    <!-- end .container -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous">

    </script>
</body>

</html>